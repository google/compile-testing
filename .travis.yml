language: java
matrix:
  include:
    - os: linux
      arch: amd64
      jdk: openjdk8
    - os: linux
      arch: ppc64le
      jdk: openjdk8
      
cache:
  directories:
    - $HOME/CACHE/.ekstazi
    
before_script:
  - java -version
  - mvn -version
  
script:
  - mvn test 
  - mvn ekstazi:select
  
before_install:
  - find $HOME/CACHE -name .ekstazi | while read line; do du -sh $line; \
        DIR=$(dirname ${line#$HOME/CACHE}); if [[ -d ${DIR#.ekstazi} ]]; then cp -r $line $DIR; fi; done
    
before_cache:

  - echo CACHESIZE $(du -sk $HOME/CACHE/.ekstazi)
 
